<div id="player_msg"><i class="fa fa-cog fa-spin fa-3x fa-fw"></i> LOADING SONICS</div>
<div id="player"></div>
<div id="player_controls">
  <div id="music_dur"></div>
  <button id="audioBtnPlay" onclick="wavesurfer.play()">
    <i class="fa fa-play" aria-hidden="true"></i>
  </button>
  <button id="audioBtnPause" onclick="wavesurfer.pause()">
    <i class="fa fa-pause" aria-hidden="true"></i>
  </button>
  <button id="toggleMuteBtn" onclick="wavesurfer.toggleMute()">Toggle Mute</button>
  {% if page.bin_url %}
    <button id="toggleBinBtn" onclick="toggleBin()">Toggle Stereo/Binaural</button>
  {% endif %}
 <script>
   var url = "{{ page.stream_url }}";
   console.log(url);
   
   var dur = 0.0;

   var wavesurfer = WaveSurfer.create({
     container: "#player",
     cursorWidth: 2,
   });

   wavesurfer.on('ready', function () {
         document.getElementById("player_msg").innerHTML = "";
         wavesurfer.play();
         dur = wavesurfer.getDuration().toFixed(2);
         console.log(dur);
         document.getElementById("music_dur").innerHTML = `<i class="fa fa-clock-o" aria-hidden="true"></i> ${dur}`;
  
   });

   wavesurfer.load(`//${url}`);

   function toggleBin() {
     var stUrl = "{{ page.stream_url }}";
     var binUrl = "{{ page.bin_url }}";
     url = url == stUrl ? binUrl : stUrl
     wavesurfer.load(`//${url}`);
   }

 </script>
